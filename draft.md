# 概要

あとで書く。

# Ubie UI MCP について

あとで書く。

## 自己紹介

普段、症状検索エンジンユビー(https://ubie.app/)という、toC向けプロダクトの開発エンジニアを行っています。
Ubie 株式会社にはバックエンドエンジニアとして採用をしていただき、2023 年 11 月から Join をしています。
今までのキャリアはどちらかというとフロントエンドよりもバックエンドを主戦にやってきたので、フロントエンドの知識はあまりありませんでした。
また、デザインシステムをしっかり運用している会社に入ったのは Ubie が初めてであり、デザインシステムを使った開発に慣れているわけでもありませんでした。

## Ubie Vitals とは

Ubie のデザインシステムは「Ubie Vitals」という名前で運用されています。

Ubie Vitals とは Ubie で開発・提供するプロダクトが、すべてのユーザー（生活者や医療機関従事者など）に対してよりよい体験を届けていくために、デザイン上において目指すべき指針を言語化したものがデザイン原則です。プロダクト開発に関わるすべての人が、誰でも、効率よく、迷わずに、Ubie らしい表現をするための基礎となっています。

![Ubie VitalsのTOPページ](./image/image_1.png)

## なぜ作ったのか？背景とモチベーション

2025 年 2 月ごろに、ユビーの中ではかなり複雑なフロントエンドのリニューアルプロジェクトに参画することになりました。チームメンバーはデザイナー、プロダクトマネージャー、そしてエンジニアとしては私の 3 人で、密に協力しながら開発を進めていきました。画面としては 1 画面のみなのですが、かなり色々な機能が詰まったページでした。また、利用ユーザーがかなり多いため、丁寧にかつスピーディに開発を進める必要がありました。

そのプロジェクトの開発の手順は主に以下のようなフローでした。

1. デザイナーが Figma でデザインを作成する
2. 1 で仕上がったデザインをチームメンバー(私、PdM、デザイナー)でレビューする
3. レビューが通ったら、エンジニアである私が AB テストを実装し旧画面との性能比較を行う
4. 私が分析ダッシュボードを作成し、デザイナーと PdM と数値を共有する
5. 検証結果が良ければ、そのまま段階的に全ユーザーにデプロイし、まだ検証結果が良くない場合は、1 に戻ってデザインを修正する

![フローイメージ](./image/image_2.png)

このようなサイクルを高速で回す必要があり、具体的には、週に 3〜4 個の UI パターンを検証するようなスピード感が求められていました。

### AI は Ubie Vitals のコンテキストを読み込んでくれない

私のようなフロントエンドに精通していないエンジニアが、スピーディに複雑な UI を実装するためにはデザインシステムをうまく活用しながら、かつ AI に頼ってコードを書く必要がありました。
しかし、AI に頼るとなかなか Ubie Vitals のコンテキストを読み込んでくれません。AI はメジャー OSS をインプットしてコードを書くことはある程度できてきているのですが、社内の独特なコンテキストを一気に読み込んで解釈することは苦手です。
いくつか以下のようなデザインシステムのインプットを試してみましたが、なかなか納得のいくような精度まで上がることはありませんでした。

- Cursor Rules に Ubie Vitals のコンポーネントを全て読み込ませる
- node_modules 内の Ubie Vitals のディレクトリを参照させる
- Ubie Vitals の Web サイトを参照させる

これらの方法はすべて、コンテキストサイズが膨大すぎることが一番の原因でした。

### MCP の登場

そんな中で MCP(Model Context Protocol) という技術が注目され始めました。

claude の MCP の冒頭解説をみると以下のように書いてあります。

> Think of MCP like a USB-C port for AI applications. Just as USB-C provides a standardized way to connect your devices to various peripherals and accessories, MCP provides a standardized way to connect AI models to different data sources and tools.

この説明を見て、データソースとしてのデザインシステムを USB のように AI というデバイスに接続することができるならば、AI にデザインシステムのコンテキストを読み込んでくれるのではないかと思いました。

ただ、なかなかまだ当時は MCP という技術がなんとなくすごいということはわかっていたのですが、具体的にどんなユースケースで使っていけば良いのか、社内でも試行錯誤している段階でした。ですのであまり期待はしていなかったのですが、勉強がてら試作を作ってみたところかなり精度高くコードを生成できるようになりました。

Figma の MCP を使って、1 ラリーでここまでのコードを生成してくれるようになりました。

![実際に生成されたコード](./image/image_3.png)

## 実装方針

実際の実装を見てみましょう。実装は驚くほど簡単です。
前提として、社内の人間のみが使えればそれでよいということ、セキュリティの観点からローカルである程度完結をさせたいという点、最後に運用をできるだけ簡単にしたいという点があります。

最後の観点がとても重要で、Ubie はまだまだ大きい会社ではなくデザインシステムにたくさんのリソースを寄せられるような判断は今はできません。そのため、今後 Ubie Vitals にコンポーネントが追加、改修されたとしても MCP 自体を更新する必要がないようにしたいということです。
そのため、以下のような実装方針で進めることにしました。

1.  Ubie UI のコードをベースに MCP を実装する
2.  コードが変更されたら、その変更を MCP に自動で反映されるようにする

## setup 方法

以下のリポジトリを clone します。

```bash
git clone https://github.com/ubie-oss/ubie-ui.git
git clone https://github.com/ubie-oss/design-tokens.git
git clone https://github.com/ubie-oss/ubie-icons.git
```

社内のフロントエンドを触るエンジニアはすでにこれらのリポジトリを clone している人が多いため、そのまま使うことができます。

また、これは一応 OSS なので、誰でもみられるようになっています。

## 主な機能

Ubie UI MCP は以下のような機能を tools を使って AI に提供します。

- get-components
- get-style-types
- get-design-tokens

### get-components - コンポーネントの一覧を取得する

### get-style-types - スタイルの種類を取得する

### get-design-tokens - デザイントークンを取得する

## 使い方

## Figma MCP との連携

## 作ったことの成果

## Ubie の個人のアイデアを吸い上げる環境
